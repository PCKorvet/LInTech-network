# LInTech - плата Терминальной Машины (ТМ) - клиента ПК Корвет (ПК 8010/8020 «Корвет»)

Плата в процессе воссоздания [Night Gryphon'ом](https://github.com/nightgryphon) по фото и сканам имеющихся в наличии у [Serebriakov](https://github.com/PaulArgent) и [Lordamot](https://github.com/lordamot) оригиналам.

- Reference_Photo - фото и сканы плат
- Firmware - микропрограммы (прошивки)

## Техническое описание
[WIP]

Плата построена на базе микроконтроллера серии Intel 8051 (Intel MCS-51). Обычно использовались:
- ATMEL AT89C51
- SIEMENS SAB8051A-P

Программа контроллера размещена во внешнем ПЗУ. Использовались EPROM 2716 (КС573РФ2, КС573РФ5) или EPROM 2732 в зависимости от наличия на заводе изготовителе.

## Интерфейс клиента ПК Корвет

## Описание микропрограммы

### Выбор номера Терминальной Машины

Каждая Терминальная Машина имеет свой номер в сети от 00 до 31. Максимальное количество машин в сети - 32, указано в описании прошивок серверных плат.

Номер терминала задается в прошивке EPROM 2716 - **П1** (чип слева на плате рядом с Intel 8051).

Так же номер указан на наклейках чипов ПЗУ либо микроконтроллера в формате: **Т00**, где  **00** - номер терминала. Например, **T07** для **7-ой** машины в сети.

Пример сравнения двух прошивок версии **B3** для **7-ой** машины в сети и **14-ой**. По смещению 0x53 виден байт, задающий номер терминала:

[<img src="Firmware/EPROM-P1-Left/T07-T14-COMPARE.png" height="250px" margin="15px">](Firmware/EPROM-P1-Left/T07-T14-COMPARE.png)



### Версии плат

Имеются две версии платы:
- c одним распаянным EPROM 2716:
  - **КЛС-ТМ-2 П0** - чип справа на плате
- c двумя распаянными EPROM 2716:
  - **КЛС-ТМ-2 П0** - чип справа на плате
  - **КЛС-ТМ-2 П1** - чип слева на плате рядом с Intel 8051

Все прошивки имеют размер 2кб (16кбит).

Прошивки в чипах П0 сопадают на платах с одним EPROM 2716 и двумя EPROM 2716.

На платах с EPROM 2732 4кб (32кбит), первые 2кб прошивки заполнены пустотой с кодом 0xFF (255), остальные 2кб - самой прошивкой, такой же как и в EPROM 2716 2кб (16кбит).

### Маркировка чипов

На платах обнаружились две версии прошивок: **B3** и **B3t**.

На версии платы с одним распаянным EPROM 2716, в отсутсвии второго чипа, вторая наклейка наклеяна на микроконтроллер Intel 8051 (серия Intel MCS-51):
- **КЛС - ТМ - 2 П1 B3t T00**

EPROM 2716 маркировались наклейками:
- **КЛС-ТМ-2 П0 B3** - чип справа на плате
- **КЛС-ТМ-2 П1 B3 T00** - чип слева на плате рядом с Intel 8051

или
- **КЛС-ТМ-2 П0 B3t** - чип справа на плате
- **КЛС-ТМ-2 П1 B3t T00** - чип слева на плате рядом с Intel 8051

в зависимости от версии прошивки внутри чипа.

Встречаются платы с перемешанными версиями прошивок на чипах, т.е. в **П0** зашита прошивка версии **B3**, а в **П1** прошивка версии **B3t** и наоборот: в **П0** - **B3t**, В **П1** - **B3**. Как это влияет на работу предстоит выяснить. Но в подавляющем большиснтве сохранившихся плат, прошивки обоих чипов EPROM все-таки имеюют одну и ту же версию прошивки - либо **B3**, либо **B3t**. 



# Сетевой протокол
[Требуется помощь]



# Ссылки
Дружественный проект по реконструкции платы для ПЭВМ Корвет от коллег NexusOfPenza и Lordamot
[https://github.com/lordamot/retro-lintech](https://github.com/lordamot/retro-lintech)
